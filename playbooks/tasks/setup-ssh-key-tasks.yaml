---
# Tasks for setting up SSH keys for workshop VMs
- name: Read SSH public key content
  ansible.builtin.slurp:
    src: "{{ ansible_env.HOME }}/.ssh/{{ ssh_key_name }}.pub"
  register: ssh_public_key_content

- name: Decode SSH public key
  ansible.builtin.set_fact:
    ssh_public_key: "{{ ssh_public_key_content.content | b64decode | trim }}"

- name: Display success message
  ansible.builtin.debug:
    msg: "SSH secret updated successfully with your public key"
